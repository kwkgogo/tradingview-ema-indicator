//@version=6
indicator("EMA 9/21/50", overlay=true)

// Input parameters
showEMA9 = input.bool(true, "Show EMA 9", group="Display Settings")
showEMA21 = input.bool(true, "Show EMA 21", group="Display Settings")
showEMA50 = input.bool(true, "Show EMA 50", group="Display Settings")
showCrossLabels = input.bool(true, "Show Cross Labels", group="Display Settings")

// Calculate EMAs
ema9 = ta.ema(close, 9)
ema21 = ta.ema(close, 21)
ema50 = ta.ema(close, 50)

// Plot EMAs
plot(showEMA9 ? ema9 : na, "EMA 9", color=color.yellow, linewidth=2)
plot(showEMA21 ? ema21 : na, "EMA 21", color=color.blue, linewidth=2)
plot(showEMA50 ? ema50 : na, "EMA 50", color=color.red, linewidth=2)

// Detect crosses
crossUp9_21 = ta.crossover(ema9, ema21)
crossDown9_21 = ta.crossunder(ema9, ema21)
crossUp9_50 = ta.crossover(ema9, ema50)
crossDown9_50 = ta.crossunder(ema9, ema50)

// Plot labels for crosses
if showCrossLabels and crossUp9_21
    label.new(bar_index, low, "9↑21", style=label.style_label_up, color=color.green, textcolor=color.white, size=size.small)

if showCrossLabels and crossDown9_21
    label.new(bar_index, high, "9↓21", style=label.style_label_down, color=color.red, textcolor=color.white, size=size.small)

if showCrossLabels and crossUp9_50
    label.new(bar_index, low, "9↑50", style=label.style_label_up, color=color.green, textcolor=color.white, size=size.small)

if showCrossLabels and crossDown9_50
    label.new(bar_index, high, "9↓50", style=label.style_label_down, color=color.red, textcolor=color.white, size=size.small)

// Alert conditions
alertcondition(crossUp9_21, "EMA 9 crosses above EMA 21", "EMA 9 has crossed above EMA 21")
alertcondition(crossDown9_21, "EMA 9 crosses below EMA 21", "EMA 9 has crossed below EMA 21")
alertcondition(crossUp9_50, "EMA 9 crosses above EMA 50", "EMA 9 has crossed above EMA 50")
alertcondition(crossDown9_50, "EMA 9 crosses below EMA 50", "EMA 9 has crossed below EMA 50")
